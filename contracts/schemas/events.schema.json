{
    "$id":"ironvest.events",
    "type":"object",
    "oneOf":[
      {"$ref":"#/definitions/LoopRunCompleted"},
      {"$ref":"#/definitions/GoldLoopBreach"},
      {"$ref":"#/definitions/LensFlowStepCompleted"}
    ],
    "definitions":{
      "LoopRunCompleted":{
        "type":"object",
        "required":["event","loop_id","result_ref","regime_tag","timestamp"],
        "properties":{
          "event":{"const":"loop.run.completed"},
          "loop_id":{"type":"string"},
          "result_ref":{"type":"string"},
          "regime_tag":{"type":"string"},
          "timestamp":{"type":"string","format":"date-time"}
        }
      },
      "GoldLoopBreach":{
        "type":"object",
        "required":["event","loop_id","bound","value","timestamp"],
        "properties":{
          "event":{"const":"goldloop.breach"},
          "loop_id":{"type":"string"},
          "bound":{"type":"string"},
          "value":{"type":"number"},
          "timestamp":{"type":"string","format":"date-time"}
        }
      },
      "LensFlowStepCompleted":{
        "type":"object",
        "required":["event","pi_id","loop_loss_delta","omegaPi_norm_pre","omegaPi_norm_post","regime_scope","timestamp"],
        "properties":{
          "event":{"const":"lensflow.step.completed"},
          "pi_id":{"type":"string"},
          "loop_loss_delta":{"type":"number"},
          "omegaPi_norm_pre":{"type":"number"},
          "omegaPi_norm_post":{"type":"number"},
          "regime_scope":{
            "type":"object",
            "properties":{
              "train_tags":{"type":"array","items":{"type":"string"}},
              "validate_tags":{"type":"array","items":{"type":"string"}}
            }
          },
          "timestamp":{"type":"string","format":"date-time"}
        }
      }
    }
  }
  